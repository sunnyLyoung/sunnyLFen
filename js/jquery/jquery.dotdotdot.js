;(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define(['jquery'], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory(require('jquery'));
  } else {
    root.jquery_dotdotdot_js = factory(root.jQuery);
  }
}(this, function(jQuery) {
/*
 *	jQuery dotdotdot 3.0.2
 *	@requires jQuery 1.7.0 or later
 *
 *	dotdotdot.frebsite.nl
 *
 *	Copyright (c) Fred Heusschen
 *	www.frebsite.nl
 *
 *	License: CC-BY-NC-4.0
 *	http://creativecommons.org/licenses/by-nc/4.0/
 */
!function(t,e){"use strict";function n(){h=t(window),s={},a={},o={},t.each([s,a,o],function(t,e){e.add=function(t){t=t.split(" ");for(var n=0,i=t.length;n<i;n++)e[t[n]]=e.ddd(t[n])}}),s.ddd=function(t){return"ddd-"+t},s.add("truncated keep text"),a.ddd=function(t){return"ddd-"+t},a.add("text"),o.ddd=function(t){return t+".ddd"},o.add("resize"),n=function(){}}var i="dotdotdot",r="3.0.2";if(!(t[i]&&t[i].version>r)){t[i]=function(t,e){this.$dot=t,this.api=["getInstance","truncate","restore","destroy","watch","unwatch"],this.opts=e;var n=this.$dot.data(i);return n&&n.destroy(),this.init(),this.truncate(),this.opts.watch&&this.watch(),this},t[i].version=r,t[i].uniqueId=0,t[i].defaults={ellipsis:"… ",truncate:"word",tolerance:0,keep:null,watch:"window"},t[i].prototype={init:function(){this.watchInterval=null,this.uniqueId=t[i].uniqueId++,this.originalContent=this.$dot.contents(),this.originalStyle=this.$dot.attr("style")||"",this.maxHeight=this._getMaxHeight()+this.opts.tolerance,"break-word"!==this.$dot.css("word-wrap")&&this.$dot.css("word-wrap","break-word"),"nowrap"===this.$dot.css("white-space")&&this.$dot.css("white-space","normal")},getInstance:function(){return this},truncate:function(){var e=this;this.$inner=this.$dot.wrapInner("<div />").children().css({display:"block",height:"auto",width:"auto",border:"none",padding:0,margin:0}),this.$inner.contents().detach().end().append(this.originalContent.clone(!0)),this.$inner.find("script, style").addClass(s.keep),this.opts.keep&&this.$inner.find(this.opts.keep).addClass(s.keep),this.$inner.find("*").add(this.$inner).not("."+s.keep).contents().each(function(){var n=this,i=t(this);if(3==n.nodeType){if(i.prev().is("table, thead, tfoot, tr, th, td, dl, dt, dd, ul, ol, li, video"))return void i.remove();if(i.parent().contents().length>1){var r=t('<span class="'+s.text+'">'+e.__getTextContent(n)+"</span>").css({display:"inline",height:"auto",width:"auto",border:"none",padding:0,margin:0});i.replaceWith(r)}}else 8==n.nodeType&&i.remove()});var n=this._truncateNode(this.$inner);return this.$dot[n?"addClass":"removeClass"](s.truncated),this.$inner.find("*").add(this.$inner).filter("."+s.text).each(function(){t(this).replaceWith(t(this).contents())}),this.$inner.find("*").add(this.$inner).filter("."+s.keep).removeClass(s.keep),this.$inner.replaceWith(this.$inner.contents()),this.$inner=null,n},restore:function(){this.unwatch(),this.$dot.contents().detach().end().append(this.originalContent).attr("style",this.originalStyle).removeClass(s.truncated)},destroy:function(){this.restore(),this.$dot.data(i,null)},watch:function(){var t=this;if(this.unwatch(),"window"==this.opts.watch){var e,n,i,r;h.on(o.resize+t.uniqueId,function(s){t.watchInterval&&clearInterval(t.watchInterval),t.watchInterval=setTimeout(function(){i=h.width(),r=h.height(),e==i&&n==r||t.truncate(),e=i,n=r},100)})}else{var s,a;this.watchInterval=setInterval(function(){t.$dot.is(":visible")&&(a={width:t.$dot.innerWidth(),height:t.$dot.innerHeight()},s.width==a.width&&s.height==s.height||t.truncate(),s=a)},500)}},unwatch:function(){h.off(o.resize+this.uniqueId),this.watchInterval&&clearInterval(this.watchInterval)},_api:function(){var e=this,n={};return t.each(this.api,function(t){var i=this;n[i]=function(){var t=e[i].apply(e,arguments);return"undefined"==typeof t?n:t}}),n},_truncateNode:function(e){var n=this,i=!1,r=!1;return t(e.children().get().reverse()).not("."+s.keep).each(function(){var e=(t(this).contents()[0],t(this));if(!i&&!e.hasClass(s.keep)){if(e.children().length)i=n._truncateNode(e);else if(!n._fits()||r){var a=t("<span>").css("display","none");if(e.replaceWith(a),e.detach(),n._fits()){if("node"==n.opts.truncate)return!0;a.replaceWith(e),i=n._truncateWord(e),i||(r=!0,e.detach())}else a.remove()}e.contents().length||e.remove()}}),i},_truncateWord:function(t){var e=t.contents()[0];if(!e)return!1;for(var n=this,i=this.__getTextContent(e),r=i.indexOf(" ")!==-1?" ":"　",s=i.split(r),a="",o=s.length;o>=0;o--){if(a=s.slice(0,o).join(r),0==o)return"letter"==n.opts.truncate&&(n.__setTextContent(e,s.slice(0,o+1).join(r)),n._truncateLetter(e));if(a.length&&(n.__setTextContent(e,n._addEllipsis(a)),n._fits()))return"letter"!=n.opts.truncate||(n.__setTextContent(e,s.slice(0,o+1).join(r)),n._truncateLetter(e))}return!1},_truncateLetter:function(t){for(var e=this,n=this.__getTextContent(t),i=n.split(""),r="",s=i.length;s>=0;s--)if(r=i.slice(0,s).join(""),r.length&&(e.__setTextContent(t,e._addEllipsis(r)),e._fits()))return!0;return!1},_fits:function(){return this.$inner.innerHeight()<=this.maxHeight},_addEllipsis:function(e){for(var n=[" ","　",",",";",".","!","?"];t.inArray(e.slice(-1),n)>-1;)e=e.slice(0,-1);return e+=this.opts.ellipsis},_getMaxHeight:function(){for(var t=["height","maxHeight"],e=0,n=0;n<t.length;n++){var i=window.getComputedStyle(this.$dot[0])[t[n]];"px"==i.slice(-2)&&(i=parseInt(i,10),e=e?Math.min(e,i):i)}switch(this.$dot.css("boxSizing")){case"padding-box":case"border-box":for(var t=["paddingTop","paddingBottom"],n=0;n<t.length;n++){var r=window.getComputedStyle(this.$dot[0])[t[n]];"px"==r.slice(-2)&&(e-=parseInt(r,10))}}return Math.max(e,0)},__getTextContent:function(t){for(var e=["nodeValue","textContent","innerText"],n=0;n<e.length;n++)if("string"==typeof t[e[n]])return t[e[n]];return""},__setTextContent:function(t,e){for(var n=["nodeValue","textContent","innerText"],i=0;i<n.length;i++)t[n[i]]=e}},t.fn[i]=function(e){return n(),e=t.extend(!0,{},t[i].defaults,e),this.each(function(){t(this).data(i,new t[i](t(this),e)._api())})};var s,a,o,h}}(jQuery);
return true;
}));
